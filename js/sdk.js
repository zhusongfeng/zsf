;(function(){var Context=function(){"use strict";var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function __extends(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function __awaiter(a,i,s,c){return new(s=s||Promise)(function(t,e){function n(t){try{r(c.next(t))}catch(t){e(t)}}function o(t){try{r(c.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,o)}r((c=c.apply(a,i||[])).next())})}function __generator(n,o){var r,a,i,t,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){s.label=e[1];break}if(6===e[0]&&s.label<i[1]){s.label=i[1],i=e;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(e);break}i[2]&&s.ops.pop(),s.trys.pop();continue}e=o.call(n,s)}catch(t){e=[6,t],a=0}finally{r=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var JOKE_APPS=["joke_essay","Joke"],LIVE_APPS=["live_stream"],AWEME_APPS=["aweme"],NewsArticle_APPS=["NewsArticle"],WEBVIEW_SDKS=["TTAD"],VIDEOARTICLE_APPS=["VideoArticle"],TOUTIAO_APPS=["News","NewsSocial","Explore","NewsArticle","NewsInHouse","Video","VideoInHouse","VideoArticle","aweme","open_news"].concat(JOKE_APPS,LIVE_APPS,["Video","VideoInHouse","VideoArticle"],AWEME_APPS,["open_news","TTAD","douyin_lite"]),UA=navigator.userAgent,TOUTIAO_UA=new RegExp("("+TOUTIAO_APPS.join("|")+")","i"),JOKE_UA=new RegExp("("+JOKE_APPS.join("|")+")","i"),LIVE_UA=new RegExp("("+LIVE_APPS.join("|")+")","i"),AWEME_UA=new RegExp("("+AWEME_APPS.join("|")+")","i"),VIDEOARTICLE_UA=new RegExp("("+VIDEOARTICLE_APPS.join("|")+")","i"),NEWSARTICLE_UA=new RegExp("("+NewsArticle_APPS.join("|")+")","i"),WEBVIEW_UA=new RegExp("("+WEBVIEW_SDKS.join("|")+")","i"),isToutiaoApp=function(){return"http://nativeapp.toutiao.com"==document.referrer||TOUTIAO_UA.test(UA)},isJokeApp=function(){return JOKE_UA.test(UA)},isLiveApp=function(){return LIVE_UA.test(UA)},isAwemeApp=function(){return AWEME_UA.test(UA)},isNewsArticleApp=function(){return NEWSARTICLE_UA.test(UA)},isTTAD=function(){return WEBVIEW_UA.test(UA)},isVideoArticle=function(){return VIDEOARTICLE_UA.test(UA)},isExternal=function(){return!isToutiaoApp()&&/(UCBrowser|baiduboxapp|baidubrowser|MQQBrowser|QQ|MicroMessenger|Weibo|Opera|Firefox|MSIE|360SE|MetaSr|TheWorld|Firefox|LBBROWSER|Chrome|Safari)(\s|\/|_)(\S)/i.test(navigator.userAgent)},getPlatform=function(){return/windows phone/i.test(UA)?"Windows Phone":/android/i.test(UA)?"android":/iPad|iPhone|iPod/.test(UA)&&!window.MSStream?"ios":"pc"},isAndroid=function(){return"android"===getPlatform()},isIOS=function(){return"ios"===getPlatform()};function setToSessionStorage(t,e){window.sessionStorage.setItem(t,e)}function getFromSessionStorage(t){return window.sessionStorage.getItem(t)}function loadScript(t){var n=document.createElement("script");n.src=t;var e=new Promise(function(t,e){n.onload=t,n.onerror=e});return document.head.appendChild(n),e}function getXPath(t){for(var e="";t.length;){var n=Array.prototype.pop.apply(t);if(n&&n.tagName&&"body"!=n.tagName.toLowerCase()&&"html"!=n.tagName.toLowerCase()){var o="function"==typeof n.getAttribute?n.getAttribute("id"):"";e+=n.tagName.toLowerCase()+getChildrenIndex(n)+(o?"#"+o:"")+(0==t.length?"":">")}}return e}function getElementParentsAndSelf(t){var e=getElementParents(t);return e.unshift(t),e}function getElementParents(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e}function getChildrenIndex(t){if(t.sourceIndex)return t.sourceIndex-t.parentNode.sourceIndex-1;for(var e=0;t=t.previousElementSibling;)e++;return e}var getPosition=function(t){if(t)return{xpath:getXPath(getElementParentsAndSelf(t))}},getPageInfo=function(){return{path:location.pathname,referrer:document.referrer,search:location.search,title:document.title||"",page_url:location.href,page_type:window._page_type?window._page_type:0,site_id:getSiteId()||""}};function getSiteId(){return(window.location.pathname.match(/\d+/g)||[])[0]||""}function jsonToQuery(t){var e=[];t=t||{};var n=/^(?:string|boolean|number)/i;for(var o in t)t.hasOwnProperty(o)&&n.test(typeof t[o])&&e.push(o+"="+t[o]);return e.join("&")}function queryString(t,e){var n=RegExp("[?&]"+t+"=([^&]*)").exec(e);return n&&decodeURIComponent(n[1].replace(/\+/g," "))}function getLocationParam(t){var e=location.search;return queryString(t,e)||(e=document.referrer),queryString(t,e)}function getAdId(){return getLocationParam("_tt_ad_id")||getLocationParam("ad_id")}var TTBRIDGE_STATUS={FAIL:0,UNUSE:1,SUCCESS:2},Bridge=(Ba.prototype.setBridgeState=function(t,e){switch(t){case"adInfo":this.adInfoFlag=e;break;case"appInfo":this.appInfoFlag=e}},Ba.prototype.callPromise=function(a){return __awaiter(this,void 0,void 0,function(){var o,r;return __generator(this,function(t){switch(t.label){case 0:return[4,(o=this).bridgeLoaded];case 1:return r=t.sent(),this.setBridgeState(a,TTBRIDGE_STATUS.FAIL),[2,this.retry(function(){return new Promise(function(e,t){var n=setTimeout(function(){o.adInfoFlag!=TTBRIDGE_STATUS.FAIL&&o.appInfoFlag!=TTBRIDGE_STATUS.FAIL||t("timeout")},400);r.call(a,{},function(t){o.setBridgeState(a,TTBRIDGE_STATUS.SUCCESS),e(t),clearTimeout(n)})})},1)]}})})},Ba.prototype.retry=function(o,r){void 0===r&&(r=1);var a=this;return new Promise(function(n){o().then(function(t){n(t)},function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(1!==r)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),e=n,[4,o()];case 2:return e.apply(void 0,[t.sent()]),[3,4];case 3:return t.sent(),n({}),[3,4];case 4:return[3,6];case 5:n(a.retry(o,r-1)),t.label=6;case 6:return[2]}})})})})},Ba.prototype.track_event=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.bridgeLoaded];case 1:return t.sent().call("track_event",e),[2]}})})},Ba.prototype.setSession=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return n=[{}],[4,this.adInfo];case 1:return n=n.concat([t.sent()]),[4,this.appInfo];case 2:return e=__assign.apply(void 0,n.concat([t.sent()])),setToSessionStorage("bridge",JSON.stringify(e)),[2]}})})},Ba);function Ba(t){this.adInfoFlag=TTBRIDGE_STATUS.UNUSE,this.appInfoFlag=TTBRIDGE_STATUS.UNUSE,this.bridgeLoaded=loadScript(t).then(function(){return window.ToutiaoJSBridge}),this.adInfo=this.callPromise("adInfo"),this.appInfo=this.callPromise("appInfo"),this.setSession()}var getBridgeSession=function(){var e,t=getFromSessionStorage("bridge")||"{}";try{e=JSON.parse(t)}catch(t){e={}}return e},getUmengSession=function(){var e,t=getFromSessionStorage("umeng")||"{}";try{e=JSON.parse(t)}catch(t){e={}}return e},UMENG_STATUS={FAIL:0,UNUSE:1,SUCCESS:2},params_flag=UMENG_STATUS.UNUSE;function getWebUrlInfo(){params_flag=UMENG_STATUS.FAIL;var t,e=decodeURIComponent(getLocationParam("_toutiao_params")||getLocationParam("_toutiao_recommend")||"");try{t=JSON.parse(e)}catch(t){return{}}return params_flag=UMENG_STATUS.SUCCESS,setToSessionStorage("umeng",JSON.stringify(t)),t}"{}"!==JSON.stringify(getUmengSession())&&(params_flag=UMENG_STATUS.SUCCESS);var umengData=getWebUrlInfo(),paramsFlag=params_flag,BRIDGE_URL="https://s3.pstatp.com/inapp/toutiao.js",bridge=new Bridge(BRIDGE_URL),EXT_STATUS={FAIL:0,SUCCESS:2},extFlag=isExternal()?EXT_STATUS.FAIL:EXT_STATUS.SUCCESS;function context(){return __awaiter(this,void 0,void 0,function(){var e,n,o,r,a,i;return __generator(this,function(t){switch(t.label){case 0:return n=[{}],[4,bridge.adInfo];case 1:return n=n.concat([t.sent()]),[4,bridge.appInfo];case 2:return e=__assign.apply(void 0,n.concat([t.sent()])),o=100+10*bridge.adInfoFlag+bridge.appInfoFlag,r=1e3+100*bridge.adInfoFlag+10*paramsFlag+extFlag,a=__assign({},getPageInfo(),getUmengSession(),umengData,getBridgeSession(),e),i=JSON.parse(a.log_extra||"{}"),[2,{value:a.cid||"",log_extra:a.log_extra||"",req_id:a.req_id||i.req_id||"",cid:a.cid||"",ad_id:a.ad_id||getAdId()||"",device_id:a.device_id||"",user_id:a.user_id||"",uid:a.uid||"",ut:a.ut||"",app_version:a.appVersion||"",version_code:a.version_code||"",app_id:a.aid||"",os:getPlatform(),page_url:a.page_url,page_type:a.page_type,site_id:a.site_id,tt_bridge:o,tt_env:r}]}})})}var getContext=context,AppLogHandler=(rb.prototype.handleLog=function(t,e){return{log:t,context:e}},rb);function rb(){}var BeaconHandler=(ub.prototype.handleLog=function(t,e){try{var n=__assign({},e,t,{source:"webunion"});navigator.sendBeacon(this.API_URL,JSON.stringify(n))}catch(t){}},ub);function ub(t){this.API_URL=t}var DiscardHandler=(Ab.prototype.handleLog=function(){},Ab);function Ab(){}var ConsoleLogHandler=(Bb.prototype.handleLog=function(t,e){var n="bytedance://"+(isJokeApp()||isAndroid()||isLiveApp()||isAwemeApp()?"log_event":"custom_event")+"?";this.isRealtimeReport(e.app_version)&&(n+="&realtime_report=1"),isIOS()?n+=this.formatData(__assign({},e,t)):n+=this.formatData(this.androidData(__assign({},e,t)));try{window.webkit.messageHandlers.observe.postMessage(n)}catch(t){console.log(n)}if(this.isVideoArticleCompatible(e.app_version))try{window.webkit.messageHandlers.consoleLog.postMessage(n)}catch(t){}},Bb.prototype.isVideoArticleCompatible=function(t){var e=!1;try{e=isVideoArticle()&&"ios"==getPlatform()&&parseInt(t.replace(/\./g,""))<=794&&779<=parseInt(t.replace(/\./g,""))}catch(t){}return e},Bb.prototype.formatData=function(t){var e="";for(var n in t)"object"==typeof t[n]?e+="&"+n+"="+encodeURIComponent(JSON.stringify(t[n])):e+="&"+n+"="+encodeURIComponent(t[n]);return e},Bb.prototype.androidData=function(t){return{category:t.category,tag:t.tag,label:t.label,value:t.cid,extra:t}},Bb.prototype.isRealtimeReport=function(t){return isNewsArticleApp&&"6.6.7"===t},Bb);function Bb(){}function _assembleData(t,e){return{convert_id:t.convert_id||0,event_type:t.event_type||"",log_extra:e.log_extra,os:e.os,page_url:location.href,page_type:e.page_type}}var ImageHandler=(Tb.prototype.handleLog=function(t,e){var n=_assembleData(t,e),o=__assign({track_data:encodeURIComponent(JSON.stringify([n]))},e),r=this.API_URL+"?"+jsonToQuery(o);try{(new Image).src=window.location.protocol+r+"&t="+new Date}catch(t){}},Tb);function Tb(t){this.API_URL=t}var iframeHandler=(ac.prototype.handleLog=function(t,e){var n="bytedance://log_event?",o=__assign({},e,t);for(var r in o)"object"==typeof o[r]?n+="&"+r+"="+encodeURIComponent(JSON.stringify(o[r])):n+="&"+r+"="+encodeURIComponent(o[r]);try{window.webkit.messageHandlers.observe.postMessage(n)}catch(t){console.log(n)}},ac);function ac(){}function _assembleData$1(t,e){return{convert_id:t.convert_id||0,event_type:t.event_type||"",log_extra:e.log_extra,os:e.os,page_url:location.href,page_type:e.page_type,xpath:t.xpath||"",select_content:t.select_content||"",event_value:t.event_value||""}}function syncGet(t,e){var n=e||0,o=new XMLHttpRequest;o.open("GET",t.url,!1),o.withCredentials=!0,o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&n<1&&syncGet(t,++n)},o.send(null)}var HttpHandler=(oc.prototype.handleLog=function(t,e){var n=_assembleData$1(t,e),o=__assign({track_data:encodeURIComponent(JSON.stringify([n]))},e),r=this.API_URL+"?"+jsonToQuery(o);try{syncGet({url:r+"&t="+new Date})}catch(t){}},oc);function oc(t){this.API_URL=t}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var base64=createCommonjsModule(function(module,exports){var yc,zc;yc="undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal,zc=function(global){global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(t){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},n=0,o=t.length;n<o;n++)e[t.charAt(n)]=n;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),2<=e?"=":b64chars.charAt(n>>>6&63),1<=e?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,n=e%4,o=(0<e?b64tab[t.charAt(0)]<<18:0)|(1<e?b64tab[t.charAt(1)]<<12:0)|(2<e?b64tab[t.charAt(2)]<<6:0)|(3<e?b64tab[t.charAt(3)]:0),r=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return r.length-=[0,0,2,1][n],r.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}},module.exports=zc(yc)}),base64_1=base64.Base64,API_URL="https://isub.snssdk.com/2/wap/landing_tetris_log/",confInfo={category:"umeng",tag:"embeded_ad",label:"convert"},sdkInfo={sdk_version:"0.0.1"},LogHandler=(nd.prototype.handleLog=function(t,e){if("pay_for_fiction"===(t=__assign({},sdkInfo,t)).event_type&&(t.ad_analytics_message=this.makeAnalyticsMessage(t)),isToutiaoApp()&&!this.isAwemeCompatible(e.app_version)&&!this.isLiveCompatible(e.app_version)||(t.select_content&&(t.select_content=encodeURIComponent(t.select_content)),this.httpHandler.handleLog(t,e)),isToutiaoApp())return t=__assign({},confInfo,t),isTTAD()?this.iframeHandler.handleLog(t,e):this.consoleHandler.handleLog(t,e)},nd.prototype.makeAnalyticsMessage=function(t){var e={douyin_uid:t.douyin_uid||"",event_type:t.event_type||""};try{return base64_1.encodeURI(JSON.stringify(e))}catch(t){return null}},nd.prototype.isAwemeCompatible=function(t){var e=!1;try{e=isAwemeApp()&&"ios"==getPlatform()&&parseInt(t.replace(/\./g,""))<182}catch(t){}return e},nd.prototype.isLiveCompatible=function(t){var e=!1;try{e=isLiveApp()&&"ios"==getPlatform()&&parseInt(t.replace(/\./g,""))<420}catch(t){}return e},nd);function nd(){this.httpHandler=new HttpHandler(API_URL),this.iframeHandler=new iframeHandler,this.consoleHandler=new ConsoleLogHandler}var VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],w=window,SUPPORT_POINTER=void 0!==prefixed(w,"PointerEvent"),SUPPORT_TOUCH="ontouchstart"in w,InputStatus,Ad;Ad=InputStatus=InputStatus||{},Ad[Ad.Default=0]="Default",Ad[Ad.Start=1]="Start",Ad[Ad.Move=2]="Move",Ad[Ad.End=4]="End",Ad[Ad.Cancle=8]="Cancle";var INPUT_TYPE={pointer:{events:["pointerdown","pointermove","pointerup","pointercancel"],handler:function(t){var e=t.type,n={status:InputStatus.Default,timestamp:Date.now(),position:[t.clientX,t.clientY]};return e!==this.events[0]||0!==t.button&&"touch"!==t.pointerType?e===this.events[1]?n.status=InputStatus.Move:e===this.events[2]?n.status=InputStatus.End:e===this.events[3]&&(n.status=InputStatus.Cancle):n.status=InputStatus.Start,n}},touch:{events:["touchstart","touchmove","touchend","touchcancel"],handler:function(t){var e=t.type;if(1!==t.changedTouches.length)return null;var n={status:InputStatus.Default,timestamp:Date.now(),position:[t.changedTouches[0].clientX,t.changedTouches[0].clientY]};return e===this.events[0]?n.status=InputStatus.Start:e===this.events[1]?n.status=InputStatus.Move:e===this.events[2]?n.status=InputStatus.End:e===this.events[3]&&(n.status=InputStatus.Cancle),n.status===InputStatus.Default?null:n}},mouse:{events:["mousedown","mousemove","mouseup"],handler:function(t){var e=t.type,n={status:InputStatus.Default,timestamp:Date.now(),position:[t.clientX,t.clientY]};return e===this.events[0]&&0===t.button?n.status=InputStatus.Start:e===this.events[1]?n.status=InputStatus.Move:e===this.events[2]&&(n.status=InputStatus.End),n.status&InputStatus.Move&&1!==t.which&&(n.status=InputStatus.End),n.status===InputStatus.Default?null:n}}};"MSPointerEvent"in w&&!("PointerEvent"in w)&&(INPUT_TYPE.pointer.events=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]);var CONFIG={interval:300,time:250,threshold:9,posThreshold:10};function prefixed(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),a=0;a<VENDOR_PREFIXES.length;){if((o=(n=VENDOR_PREFIXES[a])?n+r:e)in t)return t[o];a++}}function delegate(t,e,n){for(var o=0;o<t.length;o++)document.addEventListener(t[o],e,n)}var ToutiaoClick={addClickEvent:function(i,t){function e(n){var o,r,a;return function(t){var e=INPUT_TYPE[n].handler(t);if(null!==e){if(e.status&InputStatus.Start)return o=InputStatus.Start,r=e.timestamp,void(a=e.position);if(e.status&InputStatus.End)o&InputStatus.Start&&e.timestamp-r<CONFIG.time&&Math.sqrt(Math.pow(e.position[0]-a[0],2)+Math.pow(e.position[1]-a[1],2))<CONFIG.threshold&&i(t);else if(e.status&InputStatus.Move&&o&InputStatus.Start)return}a=[r=o=0,0]}}SUPPORT_POINTER?delegate(INPUT_TYPE.pointer.events,e("pointer"),t):SUPPORT_TOUCH?delegate(INPUT_TYPE.touch.events,e("touch"),t):delegate(INPUT_TYPE.mouse.events,e("mouse"),t)}};function bindEvent(){var r,t=document.getElementById("_tt_real_page_url")||null;function a(t){var e={};e.page_url=r||decodeURIComponent(location.href),e.event_type=t.getAttribute("tt-data-eventtype")||"",e.convert_id=t.getAttribute("tt-data-convertid")||"",e.event_value=t.getAttribute("tt-data-eventvalue")||"",e.target=t,e.options=t.getAttribute("tt-data-options")||"",window.meteor.track(__assign({},e,getPosition(t)))}null!==t&&(r=t.getAttribute("href")||""),ToutiaoClick.addClickEvent(function(t){for(var e=t.target,n=e;e!=document;)"function"==typeof e.hasAttribute&&e.hasAttribute("tt-data-click")&&a(e),e=e.parentNode;if(e==document&&window._xpath_config){var o={};o.target=n,o.event_type="xpath",o.page_url=r||decodeURIComponent(location.href),window.meteor.track(__assign({},o,getPosition(n)))}},!0),document.addEventListener("beforecopy",function(t){var e=document.getSelection().toString(),n=e.length,o=t.target;if(isAndroid()&&(e=encodeURIComponent(e)),window._xpath_config&&0<n&&n<200){var r={};r.target=o,r.select_content=e,r.event_type="xpath",window.meteor.track(__assign({},r,getPosition(o)))}},!0)}var componentEmitter=createCommonjsModule(function(t){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}(t.exports=n).prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<o.length;r++)if((n=o[r])===e||n.fn===e){o.splice(r,1);break}return 0===o.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(n){o=0;for(var r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),loghandler=new LogHandler,Analytics=(Me=componentEmitter,__extends(Ne,Me),Ne.prototype._init=function(t){for(;t.length;){var e=t.pop(),n=e[0],o=e.slice(1);this._invoke.apply(this,[n].concat(o))}},Ne.prototype.sendLog=function(n){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,getContext()];case 1:return e=t.sent(),loghandler.handleLog(n,e),[2]}})})},Ne.prototype._get_basedata=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,getContext()];case 1:return[2,t.sent()]}})})},Ne.prototype.track=function(t,e){if("string"==typeof t){var n={event_type:t};e&&e.convert_id&&(n.convert_id=e.convert_id),"pay_for_fiction"===t&&(n.label="ad_analytics",n.tag="ad_analytics",n.douyin_uid=e.douyin_uid||""),this.sendLog(n),this.emit("track",n)}else console.log("event_type type error")},Ne),Me;function Ne(t){var r=Me.call(this)||this;return r._invoke=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];r[t]&&(e=r[t]).call.apply(e,[r].concat(n))},r._init(t),r}function init(){if(!window.meteor._invoke){window.meteor._invoke=!0;var t=(window.meteor||[]).slice(),e=new Analytics(t);window.meteor=e,bindEvent()}}init();var index=window.meteor;return index}();
})();;(function(){if (typeof window._page_type == 'undefined') {
  var isTetris = ['ad.toutiao.com', 'www.toutiaopage.com', 'www.chengzijianzhan.com'].indexOf(location.hostname) > -1
  var isUnion = location.search.indexOf('_toutiao_params') > -1
  if (!isTetris && isUnion) {
    !function(){"use strict";!function(t,e){var r=t.insight=t.insight||[];if(r.start=+new Date,!r.initialize&&!r.invoked){r.invoked=!0,r.methods=["track","page","on","once", "config"],r.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),r.push(e),r}};for(var n=0;n<r.methods.length;n++){var a=r.methods[n];r[a]=r.factory(a)}r.load=function(){var t=e.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://s3.pstatp.com/bytecom/resource/analytics/alpha/v1.06/insight.js";var r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)},r.SNIPPET_VERSION="1.3.3",r.load()}}(window,document)}();
  }
}
})();